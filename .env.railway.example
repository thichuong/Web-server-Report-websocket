# Railway Environment Variables Configuration
# Copy này vào Railway Dashboard → Variables

# ==========================================
# REQUIRED - Auto-set by Railway
# ==========================================

# Redis connection (auto-populated when you add Redis database)
REDIS_URL=redis://default:password@host:port

# Server port (auto-populated by Railway)
PORT=8080

# ==========================================
# REQUIRED - You must set these
# ==========================================

# TAAPI.io API key for technical indicators (RSI-14)
# Get key from: https://taapi.io
TAAPI_SECRET=your_taapi_secret_key_here

# ==========================================
# OPTIONAL - Recommended for production
# ==========================================

# Fetch interval in seconds (how often to update market data)
# Default: 10 seconds
# Recommended: 5 seconds for real-time updates
FETCH_INTERVAL_SECONDS=5

# Log level for debugging
# Options: error, warn, info, debug, trace
# Default: info
RUST_LOG=info

# Host to bind to
# Default: 0.0.0.0 (Railway requires this)
HOST=0.0.0.0

# ==========================================
# OPTIONAL - API Fallbacks
# ==========================================

# CoinMarketCap API key (fallback for crypto prices)
# Get key from: https://coinmarketcap.com/api/
# Note: Free tier has rate limits
CMC_API_KEY=your_coinmarketcap_api_key_here

# Finnhub API key (for US stock indices)
# Get key from: https://finnhub.io
FINNHUB_API_KEY=your_finnhub_api_key_here

# ==========================================
# Railway Auto-set (DO NOT SET MANUALLY)
# ==========================================

# These are automatically set by Railway:
# RAILWAY_ENVIRONMENT=production
# RAILWAY_PROJECT_ID=xxx
# RAILWAY_REPLICA_ID=replica-1
# RAILWAY_INSTANCE_ID=instance-xxx

# The leader election service automatically uses
# RAILWAY_REPLICA_ID or RAILWAY_INSTANCE_ID for
# unique node identification.

# ==========================================
# NOTES
# ==========================================

# 1. REDIS_URL is automatically set when you add Redis database
#    Railway Dashboard → + New → Database → Add Redis

# 2. For 3 replicas (1 leader + 2 followers):
#    Railway Dashboard → Settings → Deploy → Replicas = 3

# 3. With FETCH_INTERVAL_SECONDS=5 and 3 replicas:
#    - API calls: 6/min (only leader fetches)
#    - Update frequency: Every 5 seconds
#    - Cache TTL: 10 seconds (realtime_strategy)

# 4. Monitor leader election in logs:
#    railway logs | grep -E "LEADER|FOLLOWER"

# 5. Health check endpoint:
#    https://your-app.railway.app/health
